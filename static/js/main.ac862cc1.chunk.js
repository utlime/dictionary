(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{43:function(e,t,n){e.exports=n(67)},67:function(e,t,n){"use strict";n.r(t);var a,r=n(0),o=n.n(r),c=n(11),i=n.n(c),s=n(17),u=n(69),l=n(73),d=n(39),p=n(70),f=n(25),y=n(74),h=n(71),w=n(72),m=n(7),v=n.n(m),b=n(9),g=n(14);function x(e,t){switch(t.type){case a.INIT:return Object(g.a)({},e,t.payload.state);case a.STATISTIC:return Object(g.a)({},e,{statistic:Object(g.a)({},e.statistic,t.payload)});case a.SEARCH:case a.SEARCH_RESULT:case a.ITEM:case a.LOADING:return Object(g.a)({},e,t.payload)}return e}!function(e){e[e.INIT=0]="INIT",e[e.SEARCH=1]="SEARCH",e[e.SEARCH_RESULT=2]="SEARCH_RESULT",e[e.ITEM=3]="ITEM",e[e.LOADING=4]="LOADING",e[e.STATISTIC=5]="STATISTIC"}(a||(a={}));var E={isLoading:!1,search:"",searchResult:[],statistic:{total:0}};var A=n(42),O=n(35);function I(){return Object(O.openDb)("app",2,function(e){switch(e.oldVersion){case 0:e.createObjectStore("dictionary",{keyPath:"id",autoIncrement:!0});case 1:e.transaction.objectStore("dictionary").createIndex("word","word")}})}function j(e,t){return S.apply(this,arguments)}function S(){return(S=Object(b.a)(v.a.mark(function e(t,n){var a,r,o,c;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:return a=e.sent,r=a.transaction("dictionary","readwrite"),o=r.objectStore("dictionary"),e.next=7,o.add(n);case 7:return c=e.sent,e.next=10,r.complete;case 10:return e.abrupt("return",Object(g.a)({},n,{id:c}));case 11:case"end":return e.stop()}},e)}))).apply(this,arguments)}function k(e,t){return L.apply(this,arguments)}function L(){return(L=Object(b.a)(v.a.mark(function e(t,n){var a,r,o,c;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:return a=e.sent,r=a.transaction("dictionary","readwrite"),o=r.objectStore("dictionary"),e.next=7,Promise.all(n.map(function(e){return null!=e.id?o.put(e):o.add(e)}));case 7:return c=e.sent,e.next=10,r.complete;case 10:return e.abrupt("return",c);case 11:case"end":return e.stop()}},e)}))).apply(this,arguments)}function C(e,t){return T.apply(this,arguments)}function T(){return(T=Object(b.a)(v.a.mark(function e(t,n){var a,r,o,c,i,s,u,l;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.isKnown,r=n.description,o=n.word,c=n.id,e.next=3,t;case 3:return i=e.sent,s=i.transaction("dictionary","readonly"),u=s.objectStore("dictionary"),e.next=8,u.get(c);case 8:return l=e.sent,e.next=11,s.complete;case 11:return"boolean"===typeof a&&(l.isKnown=a),"string"===typeof r&&(l.description=r),"string"===typeof o&&(l.word=o),s=i.transaction("dictionary","readwrite"),u=s.objectStore("dictionary"),e.next=18,u.put(l);case 18:return e.next=20,s.complete;case 20:return e.abrupt("return",l);case 21:case"end":return e.stop()}},e)}))).apply(this,arguments)}function N(e,t){return R.apply(this,arguments)}function R(){return(R=Object(b.a)(v.a.mark(function e(t,n){var a,r,o,c,i;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.id,e.next=3,t;case 3:return r=e.sent,o=r.transaction("dictionary","readonly"),c=o.objectStore("dictionary"),e.next=8,c.get(a);case 8:return i=e.sent,e.next=11,o.complete;case 11:return e.abrupt("return",i);case 12:case"end":return e.stop()}},e)}))).apply(this,arguments)}function D(e){return G.apply(this,arguments)}function G(){return(G=Object(b.a)(v.a.mark(function e(t){var n,a,r,o;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:return n=e.sent,a=n.transaction("dictionary","readonly"),r=a.objectStore("dictionary"),e.next=7,r.getAll();case 7:return o=e.sent,e.next=10,a.complete;case 10:return e.abrupt("return",o);case 11:case"end":return e.stop()}},e)}))).apply(this,arguments)}function H(e,t){return K.apply(this,arguments)}function K(){return(K=Object(b.a)(v.a.mark(function e(t,n){var a,r,o,c,i,s;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.id,e.next=3,t;case 3:return r=e.sent,o=r.transaction("dictionary","readonly"),c=o.objectStore("dictionary"),e.next=8,c.openCursor(IDBKeyRange.lowerBound(a,!0));case 8:if(i=e.sent){e.next=13;break}return e.next=12,c.openCursor(IDBKeyRange.upperBound(a));case 12:i=e.sent;case 13:if(i){e.next=15;break}return e.abrupt("return",null);case 15:return s=i.value,e.next=18,o.complete;case 18:return e.abrupt("return",s);case 19:case"end":return e.stop()}},e)}))).apply(this,arguments)}function M(e,t){return z.apply(this,arguments)}function z(){return(z=Object(b.a)(v.a.mark(function e(t,n){var a,r,o,c,i;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.word,r=n.id,e.next=3,t;case 3:if(o=e.sent,c=[],null==r){e.next=10;break}return e.next=8,o.transaction("dictionary","readonly").objectStore("dictionary").get(r);case 8:(i=e.sent)&&c.push(i);case 10:if(null==a){e.next=19;break}return e.t0=c.push,e.t1=c,e.t2=A.a,e.next=16,o.transaction("dictionary","readonly").objectStore("dictionary").index("word").getAll(IDBKeyRange.bound(a,"".concat(a,"zzz")),25);case 16:e.t3=e.sent,e.t4=(0,e.t2)(e.t3),e.t0.apply.call(e.t0,e.t1,e.t4);case 19:return e.abrupt("return",c);case 20:case"end":return e.stop()}},e)}))).apply(this,arguments)}function U(e,t){return B.apply(this,arguments)}function B(){return(B=Object(b.a)(v.a.mark(function e(t,n){var a,r,o,c;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.id,e.next=3,t;case 3:return r=e.sent,o=r.transaction("dictionary","readwrite"),c=o.objectStore("dictionary"),e.next=8,c.delete(a);case 8:return e.next=10,o.complete;case 10:case"end":return e.stop()}},e)}))).apply(this,arguments)}function W(e){return J.apply(this,arguments)}function J(){return(J=Object(b.a)(v.a.mark(function e(t){var n;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:return n=e.sent,e.abrupt("return",n.transaction("dictionary","readonly").objectStore("dictionary").count());case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}var _="appState";var P=n(36);function F(e,t){var n=Object(r.useState)(I),o=Object(s.a)(n,1)[0];Object(r.useEffect)(function(){var e=function(){var e=localStorage.getItem(_);return null!=e?JSON.parse(e):null}();null!=e&&t({type:a.INIT,payload:{state:e}})},[]),Object(r.useEffect)(function(){!function(e){localStorage.setItem(_,JSON.stringify(e))}(e)},[e]);var c=Object(r.useCallback)(function(){var e=Object(b.a)(v.a.mark(function e(n){var r,c,i,s,u,l,d;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.word,c=n.description,i=void 0===c?"":c,s=n.isKnown,u=void 0!==s&&s,t({type:a.LOADING,payload:{isLoading:!0}}),e.next=4,j(o,{word:r,isKnown:u,description:i});case 4:return l=e.sent,e.next=7,W(o);case 7:d=e.sent,t({type:a.ITEM,payload:{item:l}}),t({type:a.SEARCH,payload:{search:""}}),t({type:a.SEARCH_RESULT,payload:{searchResult:[]}}),t({type:a.STATISTIC,payload:{total:d}}),t({type:a.LOADING,payload:{isLoading:!1}});case 13:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),[o]),i=Object(r.useCallback)(function(){var e=Object(b.a)(v.a.mark(function e(n){var r;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:a.LOADING,payload:{isLoading:!0}}),e.next=3,k(o,n.map(function(e){var t=e.word,n=e.description,a=e.isKnown;return{word:t,description:n||"",isKnown:null!=a&&a}}));case 3:return e.next=5,W(o);case 5:r=e.sent,t({type:a.STATISTIC,payload:{total:r}}),t({type:a.LOADING,payload:{isLoading:!1}});case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),[o]),u=Object(r.useCallback)(Object(b.a)(v.a.mark(function e(){var n,r;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:a.LOADING,payload:{isLoading:!0}}),e.next=3,D(o);case 3:n=e.sent,r=new File([JSON.stringify(n)],"dictionary.json",{type:"application/json"}),Object(P.saveAs)(r,"dictionary.json"),t({type:a.LOADING,payload:{isLoading:!1}});case 7:case"end":return e.stop()}},e)})),[o]),l=Object(r.useCallback)(function(){var e=Object(b.a)(v.a.mark(function e(n){var r,c,i,s,u;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.isKnown,c=n.description,i=n.word,s=n.id,t({type:a.LOADING,payload:{isLoading:!0}}),e.next=4,C(o,{isKnown:r,description:c,id:s,word:i});case 4:u=e.sent,t({type:a.ITEM,payload:{item:u}}),t({type:a.LOADING,payload:{isLoading:!1}});case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),[o]),d=Object(r.useCallback)(function(){var e=Object(b.a)(v.a.mark(function e(n){var r,c;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.id,t({type:a.LOADING,payload:{isLoading:!0}}),e.next=4,H(o,{id:r});case 4:null!=(c=e.sent)&&t({type:a.ITEM,payload:{item:c}}),t({type:a.LOADING,payload:{isLoading:!1}});case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),[o]);return{searchAction:Object(r.useCallback)(function(){var e=Object(b.a)(v.a.mark(function e(n){var r,c,i,s,u;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.search,t({type:a.LOADING,payload:{isLoading:!0}}),t({type:a.SEARCH,payload:{search:r}}),t({type:a.ITEM,payload:{item:void 0}}),"#"===r[0]?(s=Number.parseInt(r.slice(1),10),Number.isNaN(s)||(i=s)):c=r,e.next=7,M(o,{word:c,id:i});case 7:u=e.sent,t({type:a.SEARCH_RESULT,payload:{searchResult:u}}),t({type:a.LOADING,payload:{isLoading:!1}});case 10:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),[o]),addAction:c,editAction:l,nextAction:d,selectAction:Object(r.useCallback)(function(){var e=Object(b.a)(v.a.mark(function e(n){var r,c;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.id,t({type:a.LOADING,payload:{isLoading:!0}}),e.next=4,N(o,{id:r});case 4:null!=(c=e.sent)&&t({type:a.ITEM,payload:{item:c}}),t({type:a.SEARCH,payload:{search:""}}),t({type:a.SEARCH_RESULT,payload:{searchResult:[]}}),t({type:a.LOADING,payload:{isLoading:!1}});case 9:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),[o]),deleteAction:Object(r.useCallback)(function(){var e=Object(b.a)(v.a.mark(function e(n){var r,c,i;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.id,t({type:a.LOADING,payload:{isLoading:!0}}),e.next=4,U(o,{id:r});case 4:return e.next=6,H(o,{id:r});case 6:if(e.t0=e.sent,e.t0){e.next=9;break}e.t0=void 0;case 9:return c=e.t0,e.next=12,W(o);case 12:i=e.sent,t({type:a.STATISTIC,payload:{total:i}}),t({type:a.ITEM,payload:{item:c}}),t({type:a.LOADING,payload:{isLoading:!1}});case 16:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),[o]),uploadAction:i,downloadAction:u}}function V(e){var t=Object(r.useRef)(null),n=Object(r.useCallback)(function(){if(null!=t.current){var n=t.current.files;if(null!=n){var a=n.item(0);if(null!=a){var r=new FileReader;r.onload=function(){"string"===typeof r.result&&e.onLoad(JSON.parse(r.result))},r.readAsText(a)}}}},[t]);return o.a.createElement("form",{onSubmit:function(t){t.preventDefault(),e.search.length>0&&e.onAdd({word:e.search})}},o.a.createElement("input",{ref:t,type:"file",accept:"application/json",className:"d-none",onChange:n}),o.a.createElement(u.a,{className:"mt-3 mb-3"},o.a.createElement(l.a.Control,{value:e.search,size:"lg",placeholder:"Search or add new word",onChange:function(t){if(t.target instanceof HTMLInputElement){var n=t.target.value;e.onSearch({search:n})}}}),o.a.createElement(u.a.Append,null,o.a.createElement(d.a,{size:"lg",type:"submit",variant:"outline-secondary"},"add")),o.a.createElement(p.a,{as:u.a.Append,variant:"outline-secondary",alignRight:!0,title:"",size:"lg",id:"app-header-options"},o.a.createElement(f.a.Item,{href:"#",onClick:function(){null!=t.current&&t.current.click()}},"Upload words"),o.a.createElement(f.a.Item,{href:"#",onClick:e.onDownload},"Download words"))))}function $(e){return o.a.createElement(o.a.Fragment,null,e.searchResult.map(function(t){return o.a.createElement(y.a,{key:t.id,className:"mt-3 mb-3 ".concat(t.isKnown?"border-success":"")},o.a.createElement(y.a.Header,null,"Card #",t.id),o.a.createElement(y.a.Body,null,o.a.createElement(y.a.Title,null,t.word),""!==t.description&&o.a.createElement(y.a.Text,null,t.description),o.a.createElement(y.a.Link,{href:"#",onClick:function(n){n.stopPropagation(),e.onSelect({id:t.id})}},"select")))}),0===e.searchResult.length&&e.search.length>0&&"No results")}function q(e){var t=e.item;return null==t?null:o.a.createElement(y.a,{className:"mt-3 mb-3"},o.a.createElement(y.a.Header,null,"Card #",t.id),o.a.createElement(y.a.Body,null,o.a.createElement(y.a.Title,null,t.word),o.a.createElement(l.a.Control,{as:"textarea",rows:"2",size:"lg",value:t.description,onChange:function(n){var a=n.target instanceof HTMLTextAreaElement?n.target.value:t.description;e.onChange({id:t.id,description:a})}})),o.a.createElement(y.a.Footer,null,o.a.createElement(h.a,{className:"w-100"},o.a.createElement(d.a,{variant:t.isKnown?"success":"primary",size:"lg",onClick:function(){e.onChange({id:t.id,isKnown:!t.isKnown})}},"I know"),o.a.createElement(d.a,{variant:"secondary",size:"lg",onClick:function(){e.onNext({id:t.id})}},"Next"),o.a.createElement(p.a,{alignRight:!0,as:h.a,title:"",size:"lg",variant:"secondary",id:"card-options"},o.a.createElement(f.a.Item,{eventKey:"1",onClick:function(){e.onDelete({id:t.id})}},"delete")))))}function Q(e){return o.a.createElement("ul",null,o.a.createElement("li",null,"Total: ",e.statistic.total))}var X=function(){var e=function(){var e=Object(r.useReducer)(x,E),t=Object(s.a)(e,2);return[t[0],t[1]]}(),t=Object(s.a)(e,2),n=t[0],a=F(n,t[1]),c=a.searchAction,i=a.addAction,u=a.selectAction,l=a.editAction,d=a.nextAction,p=a.deleteAction,f=a.uploadAction,y=a.downloadAction;return o.a.createElement(w.a,null,o.a.createElement(V,{search:n.search,onSearch:c,onAdd:i,onLoad:f,onDownload:y}),o.a.createElement($,{searchResult:n.searchResult,search:n.search,onSelect:u}),o.a.createElement(q,{item:n.item,onChange:l,onNext:d,onDelete:p}),o.a.createElement(Q,{statistic:n.statistic}),o.a.createElement("span",{style:{display:n.isLoading?"block":"none"}},"loading ..."))},Y=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Z(e,t){navigator.onLine&&navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}i.a.render(o.a.createElement(X,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/dictionary",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("/dictionary","/service-worker.js");Y?(function(e,t){navigator.onLine&&fetch(e).then(function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):Z(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")})):Z(t,e)})}}()}},[[43,1,2]]]);
//# sourceMappingURL=main.ac862cc1.chunk.js.map