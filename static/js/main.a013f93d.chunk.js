(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{43:function(e,t,n){e.exports=n(67)},67:function(e,t,n){"use strict";n.r(t);var a,r=n(0),o=n.n(r),c=n(11),i=n.n(c),s=n(16),u=n(69),l=n(74),d=n(40),p=n(70),f=n(25),y=n(75),m=n(71),w=n(72),h=n(73),b=n(39),v=n(7),g=n.n(v),x=n(10),E=n(20);function O(e,t){switch(t.type){case a.INIT:return t.payload.state;case a.SEARCH:return Object(E.a)({},e,{search:t.payload.search});case a.SEARCH_RESULT:return Object(E.a)({},e,{searchResult:t.payload.searchResult});case a.ITEM:return Object(E.a)({},e,{item:t.payload.item});case a.LOADING:return Object(E.a)({},e,{isLoading:t.payload.isLoading})}return e}!function(e){e[e.INIT=0]="INIT",e[e.SEARCH=1]="SEARCH",e[e.SEARCH_RESULT=2]="SEARCH_RESULT",e[e.ITEM=3]="ITEM",e[e.LOADING=4]="LOADING"}(a||(a={}));var A={isLoading:!1,search:"",searchResult:[]};var j=n(35);function k(){return Object(j.openDb)("app",2,function(e){switch(e.oldVersion){case 0:e.createObjectStore("dictionary",{keyPath:"id",autoIncrement:!0});case 1:e.transaction.objectStore("dictionary").createIndex("word","word")}})}function I(e,t){return L.apply(this,arguments)}function L(){return(L=Object(x.a)(g.a.mark(function e(t,n){var a,r,o,c,i,s,u,l;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.word,r=n.isKnown,o=n.description,e.next=3,t;case 3:return c=e.sent,i=c.transaction("dictionary","readwrite"),s=i.objectStore("dictionary"),e.next=8,s.add({word:a,isKnown:r,description:o});case 8:return u=e.sent,e.next=11,i.complete;case 11:return l={id:u,word:a,description:o,isKnown:r},e.abrupt("return",l);case 13:case"end":return e.stop()}},e)}))).apply(this,arguments)}function S(e,t){return C.apply(this,arguments)}function C(){return(C=Object(x.a)(g.a.mark(function e(t,n){var a,r,o,c;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:return a=e.sent,r=a.transaction("dictionary","readwrite"),o=r.objectStore("dictionary"),e.next=7,Promise.all(n.map(function(e){return e.id?o.put(e):o.add(e)}));case 7:return c=e.sent,e.next=10,r.complete;case 10:return e.abrupt("return",c);case 11:case"end":return e.stop()}},e)}))).apply(this,arguments)}function N(e,t){return R.apply(this,arguments)}function R(){return(R=Object(x.a)(g.a.mark(function e(t,n){var a,r,o,c,i,s,u;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.isKnown,r=n.description,o=n.id,e.next=3,t;case 3:return c=e.sent,i=c.transaction("dictionary","readonly"),s=i.objectStore("dictionary"),e.next=8,s.get(o);case 8:return u=e.sent,e.next=11,i.complete;case 11:return"boolean"===typeof a&&(u.isKnown=a),"string"===typeof r&&(u.description=r),i=c.transaction("dictionary","readwrite"),s=i.objectStore("dictionary"),e.next=17,s.put(u);case 17:return e.next=19,i.complete;case 19:return e.abrupt("return",u);case 20:case"end":return e.stop()}},e)}))).apply(this,arguments)}function D(e,t){return T.apply(this,arguments)}function T(){return(T=Object(x.a)(g.a.mark(function e(t,n){var a,r,o,c,i;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.id,e.next=3,t;case 3:return r=e.sent,o=r.transaction("dictionary","readonly"),c=o.objectStore("dictionary"),e.next=8,c.get(a);case 8:return i=e.sent,e.next=11,o.complete;case 11:return e.abrupt("return",i);case 12:case"end":return e.stop()}},e)}))).apply(this,arguments)}function G(e){return K.apply(this,arguments)}function K(){return(K=Object(x.a)(g.a.mark(function e(t){var n,a,r,o;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:return n=e.sent,a=n.transaction("dictionary","readonly"),r=a.objectStore("dictionary"),e.next=7,r.getAll();case 7:return o=e.sent,e.next=10,a.complete;case 10:return e.abrupt("return",o);case 11:case"end":return e.stop()}},e)}))).apply(this,arguments)}function H(e,t){return M.apply(this,arguments)}function M(){return(M=Object(x.a)(g.a.mark(function e(t,n){var a,r,o,c,i,s;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.id,e.next=3,t;case 3:return r=e.sent,o=r.transaction("dictionary","readonly"),c=o.objectStore("dictionary"),e.next=8,c.openCursor(IDBKeyRange.lowerBound(a,!0));case 8:if(i=e.sent){e.next=13;break}return e.next=12,c.openCursor(IDBKeyRange.upperBound(a));case 12:i=e.sent;case 13:if(i){e.next=15;break}return e.abrupt("return",null);case 15:return s=i.value,e.next=18,o.complete;case 18:return e.abrupt("return",s);case 19:case"end":return e.stop()}},e)}))).apply(this,arguments)}function z(e,t){return U.apply(this,arguments)}function U(){return(U=Object(x.a)(g.a.mark(function e(t,n){var a,r,o,c,i;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.word,e.next=3,t;case 3:return r=e.sent,e.next=6,r.transaction("dictionary","readonly").objectStore("dictionary").index("word").getAll(IDBKeyRange.bound(a,"".concat(a,"zzz")),25);case 6:if(0!==(o=e.sent).length){e.next=14;break}if(c=parseInt(a,10),!Number.isInteger(c)){e.next=14;break}return e.next=12,r.transaction("dictionary","readonly").objectStore("dictionary").get(parseInt(a,10));case 12:(i=e.sent)&&o.unshift(i);case 14:return e.abrupt("return",o);case 15:case"end":return e.stop()}},e)}))).apply(this,arguments)}function B(e,t){return W.apply(this,arguments)}function W(){return(W=Object(x.a)(g.a.mark(function e(t,n){var a,r,o,c;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.id,e.next=3,t;case 3:return r=e.sent,o=r.transaction("dictionary","readwrite"),c=o.objectStore("dictionary"),e.next=8,c.delete(a);case 8:return e.next=10,o.complete;case 10:case"end":return e.stop()}},e)}))).apply(this,arguments)}var J=n(36);function _(e,t){var n=Object(r.useState)(k),o=Object(s.a)(n,1)[0];Object(r.useEffect)(function(){var e=function(){var e=localStorage.getItem("appState");return null!=e?JSON.parse(e):null}();null!=e&&t({type:a.INIT,payload:{state:e}})},[]),Object(r.useEffect)(function(){!function(e){localStorage.setItem("appState",JSON.stringify(e))}(e)},[e]);var c=Object(r.useCallback)(function(){var e=Object(x.a)(g.a.mark(function e(n){var r,c,i,s,u,l;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.word,c=n.description,i=void 0===c?"":c,s=n.isKnown,u=void 0!==s&&s,t({type:a.LOADING,payload:{isLoading:!0}}),e.next=4,I(o,{word:r,isKnown:u,description:i});case 4:l=e.sent,t({type:a.ITEM,payload:{item:l}}),t({type:a.SEARCH,payload:{search:""}}),t({type:a.SEARCH_RESULT,payload:{searchResult:[]}}),t({type:a.LOADING,payload:{isLoading:!1}});case 9:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),[o]),i=Object(r.useCallback)(function(){var e=Object(x.a)(g.a.mark(function e(n){return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:a.LOADING,payload:{isLoading:!0}}),e.next=3,S(o,n.map(function(e){var t=e.word,n=e.description,a=e.isKnown;return{word:t,description:n||"",isKnown:null!=a&&a}}));case 3:t({type:a.LOADING,payload:{isLoading:!1}});case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),[o]),u=Object(r.useCallback)(Object(x.a)(g.a.mark(function e(){var n,r;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:a.LOADING,payload:{isLoading:!0}}),e.next=3,G(o);case 3:n=e.sent,r=new File([JSON.stringify(n)],"dictionary.json",{type:"application/json"}),Object(J.saveAs)(r,"dictionary.json"),t({type:a.LOADING,payload:{isLoading:!1}});case 7:case"end":return e.stop()}},e)})),[o]),l=Object(r.useCallback)(function(){var e=Object(x.a)(g.a.mark(function e(n){var r,c,i,s;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.isKnown,c=n.description,i=n.id,t({type:a.LOADING,payload:{isLoading:!0}}),e.next=4,N(o,{isKnown:r,description:c,id:i});case 4:s=e.sent,t({type:a.ITEM,payload:{item:s}}),t({type:a.LOADING,payload:{isLoading:!1}});case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),[o]),d=Object(r.useCallback)(function(){var e=Object(x.a)(g.a.mark(function e(n){var r,c;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.id,t({type:a.LOADING,payload:{isLoading:!0}}),e.next=4,H(o,{id:r});case 4:null!=(c=e.sent)&&t({type:a.ITEM,payload:{item:c}}),t({type:a.LOADING,payload:{isLoading:!1}});case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),[o]);return{searchAction:Object(r.useCallback)(function(){var e=Object(x.a)(g.a.mark(function e(n){var r,c;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.word,t({type:a.LOADING,payload:{isLoading:!0}}),t({type:a.SEARCH,payload:{search:r}}),t({type:a.ITEM,payload:{}}),e.next=6,z(o,{word:r});case 6:c=e.sent,t({type:a.SEARCH_RESULT,payload:{searchResult:c}}),t({type:a.LOADING,payload:{isLoading:!1}});case 9:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),[o]),addAction:c,editAction:l,nextAction:d,selectAction:Object(r.useCallback)(function(){var e=Object(x.a)(g.a.mark(function e(n){var r,c;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.id,t({type:a.LOADING,payload:{isLoading:!0}}),e.next=4,D(o,{id:r});case 4:null!=(c=e.sent)&&t({type:a.ITEM,payload:{item:c}}),t({type:a.SEARCH,payload:{search:""}}),t({type:a.SEARCH_RESULT,payload:{searchResult:[]}}),t({type:a.LOADING,payload:{isLoading:!1}});case 9:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),[o]),deleteAction:Object(r.useCallback)(function(){var e=Object(x.a)(g.a.mark(function e(n){var r,c;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.id,t({type:a.LOADING,payload:{isLoading:!0}}),e.next=4,B(o,{id:r});case 4:return e.next=6,H(o,{id:r});case 6:if(e.t0=e.sent,e.t0){e.next=9;break}e.t0=void 0;case 9:c=e.t0,t({type:a.ITEM,payload:{item:c}}),t({type:a.LOADING,payload:{isLoading:!1}});case 12:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),[o]),loadAction:i,downloadAction:u}}function P(e){var t=Object(r.useRef)(null),n=Object(r.useCallback)(function(){if(null!=t.current){var n=t.current.files;if(null!=n){var a=n.item(0);if(null!=a){var r=new FileReader;r.onload=function(){"string"===typeof r.result&&e.onLoad(JSON.parse(r.result))},r.readAsText(a)}}}},[t]);return o.a.createElement("form",{onSubmit:function(t){t.preventDefault(),e.word.length>0&&e.onAdd({word:e.word})}},o.a.createElement("input",{ref:t,type:"file",accept:"application/json",className:"d-none",onChange:n}),o.a.createElement(u.a,{className:"mt-3 mb-3"},o.a.createElement(l.a.Control,{value:e.word,size:"lg",placeholder:"Search or add new word",onChange:function(t){t.target instanceof HTMLInputElement&&e.onSearch({word:t.target.value})}}),o.a.createElement(u.a.Append,null,o.a.createElement(d.a,{size:"lg",type:"submit",variant:"outline-secondary"},"add")),o.a.createElement(p.a,{as:u.a.Append,variant:"outline-secondary",alignRight:!0,title:"",size:"lg",id:"app-header-options"},o.a.createElement(f.a.Item,{href:"#",onClick:function(){null!=t.current&&t.current.click()}},"Upload words"),o.a.createElement(f.a.Item,{href:"#",onClick:e.onDownload},"Download words"))))}function F(e){return o.a.createElement(o.a.Fragment,null,e.searchResult.map(function(t){return o.a.createElement(y.a,{key:t.id,className:"mt-3 mb-3 ".concat(t.isKnown?"border-success":"")},o.a.createElement(y.a.Header,null,"Card #",t.id),o.a.createElement(y.a.Body,null,o.a.createElement(y.a.Title,null,t.word),""!==t.description&&o.a.createElement(y.a.Text,null,t.description),o.a.createElement(y.a.Link,{href:"#",onClick:function(n){n.stopPropagation(),e.onSelect({id:t.id})}},"select")))}),0===e.searchResult.length&&e.search.length>0&&"No results")}function V(e){return o.a.createElement(y.a,{className:"mt-3 mb-3"},o.a.createElement(y.a.Header,null,"Card #",e.item.id),o.a.createElement(y.a.Body,null,o.a.createElement(y.a.Title,null,e.item.word),o.a.createElement(l.a.Control,{as:"textarea",rows:"2",size:"lg",value:e.item.description,onChange:function(t){var n=t.target instanceof HTMLTextAreaElement?t.target.value:e.item.description;e.onChange({id:e.item.id,description:n})}})),o.a.createElement(y.a.Footer,null,o.a.createElement(m.a,{className:"w-100"},o.a.createElement(d.a,{variant:e.item.isKnown?"success":"primary",size:"lg",onClick:function(){e.onChange({id:e.item.id,isKnown:!e.item.isKnown})}},"I know"),o.a.createElement(d.a,{variant:"secondary",size:"lg",onClick:function(){e.onNext({id:e.item.id})}},"Next"),o.a.createElement(p.a,{alignRight:!0,as:m.a,title:"",size:"lg",variant:"secondary",id:"card-options"},o.a.createElement(f.a.Item,{eventKey:"1",onClick:function(){e.onDelete({id:e.item.id})}},"delete")))))}var $=function(){var e=function(){var e=Object(r.useReducer)(O,A),t=Object(s.a)(e,2);return[t[0],t[1]]}(),t=Object(s.a)(e,2),n=t[0],a=_(n,t[1]),c=a.searchAction,i=a.addAction,u=a.selectAction,l=a.editAction,d=a.nextAction,p=a.deleteAction,f=a.loadAction,y=a.downloadAction;return o.a.createElement(w.a,null,o.a.createElement(h.a,{className:"justify-content-md-center"},o.a.createElement(b.a,{md:"7"},o.a.createElement(P,{word:n.search,onSearch:c,onAdd:i,onLoad:f,onDownload:y}),o.a.createElement(F,{searchResult:n.searchResult,search:n.search,onSelect:u}),!!n.item&&o.a.createElement(V,{item:n.item,onChange:l,onNext:d,onDelete:p}),o.a.createElement("span",{style:{display:n.isLoading?"block":"none"}},"loading ..."))))},q=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Q(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}i.a.render(o.a.createElement($,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/dictionary",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("/dictionary","/service-worker.js");q?(function(e,t){fetch(e).then(function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):Q(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")})):Q(t,e)})}}()}},[[43,1,2]]]);
//# sourceMappingURL=main.a013f93d.chunk.js.map